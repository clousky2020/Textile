<div class="form-group">
  <%= f.label :name, "公司名" %>
  <%= f.text_field :name, required: "required", class: "form-control" %>
</div>
<div class="form-group">
  <%= f.label :contacts, "联系人姓名" %>
  <%= f.text_field :contacts, class: "form-control" %>
</div>

<div class="form-group">
  <%= f.label :phone, "联系号码" %>
  <%= f.text_field :phone, class: "form-control" %>
</div>
<div class="form-group">
  <%= f.label :address, "地址" %>
  <%= f.text_field :address, class: "form-control" %>
</div>
<div class="form-group">
  <%= f.label :description, "描述" %>
  <%= f.text_field :description, class: "form-control" %>
</div>
<div class="form-group" id="check_money">
  <%= f.label :check_money, "清算金额" %>
  <a class="far fa-question-circle" data-toggle="tooltip" data-placement="right" title="设定和供应商的初始未付货款,负值代表供应商欠我们钱"> </a>
  <%= f.number_field :check_money, placeholder: "设定初始未付货款", min: 0, step: 0.01, class: "form-control" %>
</div>
<div class="form-group" id="check_money_time">
  <%= f.label :check_money_time, "清算时间" %>
  <a class="far fa-question-circle" data-toggle="tooltip" data-placement="right" title="在此时间前记录的订单和付款单将不会参与总值计算"> </a>
  <%= f.datetime_field :check_money_time, class: "form-control" %>
  <a id="check_money_time_clear">清除清算金额和日期(不需要设置清算日期和金额，点击)</a>
</div>

<script>
    $(document).ready(function () {
        //把清算时间和清算金额一起删掉
        $("#check_money_time_clear").on("click", function () {
            $("#purchase_supplier_check_money_time").val('');
            $("#purchase_supplier_check_money").val(0);
        })
        //填充清算时间
        $("#purchase_supplier_check_money").on("change", function () {
            var myDate = new Date;
            var year = myDate.getFullYear(); //获取当前年
            var mon = myDate.getMonth() + 1; //获取当前月
            if (mon < 10) {
                mon = "0" + mon;
            }
            var date = myDate.getDay(); //获取当前日
            if (date < 10) {
                date = "0" + date;
            }
            var hh = myDate.getHours(); //获取当前小时
            if (hh < 10) {
                hh = "0" + hh;
            }
            var mm = myDate.getMinutes(); //获取当前分钟
            if (mm < 10) {
                mm = "0" + mm;
            }
            var combation=year + "-" + mon + "-" + date + "T" + hh + ":" + mm;
            $("#purchase_supplier_check_money_time").val(combation);
        })

        if (Cookies.get("change_purchase_supplier_check_money_time_tour")) {
            var intro = introJs();
            intro.setOptions({
                skipLabel: "暂时跳过",
                nextLabel: '下一步',
                prevLabel: '上一步',
                doneLabel: '完成',
                exitOnOverlayClick: false,
            });
            intro.setOptions({
                steps: [{
                    element: "#check_money",
                    intro: "如果到现在为止我们还有1万元还没有付给对方，但是之前的单据因为各种原因无法输入本系统，那这里就填10000，就从这1万元开始计算吧",
                },{
                    element: "#check_money_time",
                    intro: "在这时间之前的订单，不管任何状态，都不会记入与该供应商后续的账单计算中了"
                },{
                    element: "#check_money_time_clear",
                    intro: "如果不想设置该内容，必须点击这里完全删除以上两点设置，要不然日期删不干净，仍然会当做已经设置好了的进行计算"
                },{

                    intro: "以上通过设置清算金额和清算时间，将以前的订单忽略了，后续与供应商的对账就从这个金额和时间段开始计算。客户的清算金额也是如此设置"
                }],
            });
            intro.start().oncomplete(function () {
                Cookies.remove("change_purchase_supplier_check_money_time_tour");
            });
        }

    })
</script>