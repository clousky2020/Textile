<div class="form-group">
  <%= f.label :name, "品名" %>
  <%= f.text_field :name, placeholder: "必需，可自动填充", required: "required", class: "form-control", data: {autocomplete_source: check_material_name_material_index_path} %>
</div>
<div class="form-group">
  <%= f.label :specification, "型号规格" %>
  <%= f.text_field :specification, placeholder: "必需，可自动填充", required: "required", class: "form-control", data: {autocomplete_source: check_material_specification_material_index_path} %>
</div>
<div class="form-group">
  <%= f.label :batch_number, "批号" %>
  <%= f.text_field :batch_number, placeholder: "尽量填写", class: "form-control" %>
</div>


<div class="form-group">
  <%= f.label :repo_id, "存入仓库" %>
  <%= f.select(:repo_id, Repo.pluck(:name, :id), class: "form-control") %>
</div>
<div class="form-group">
  <%= f.label :measuring_unit, "计量单位" %>
  <%= f.select :measuring_unit, options_for_select([['包', '包'], ['件', '件'], ['箱', '箱'],]), class: "form-control" %>
</div>
<div class="form-group">
  <%= f.label :purchase_supplier, "供应商" %>
  <%= f.text_field :purchase_supplier, placeholder: "必需，可自动填充", required: "required", class: "form-control", data: {autocomplete_source: check_purchase_supplier_purchase_supplier_index_path} %>
</div>

<div class="form-group">
  <%= f.label :weight, "重量(千克)" %>
  <%= f.number_field :weight, placeholder: "必需", min: 0, step: 0.1, required: "required", class: "form-control" %>
</div>
<div class="form-group">
  <%= f.label :number, "数量" %>
  <%= f.number_field :number, placeholder: "必需", min: 0, step: 1, required: "required", class: "form-control" %>
</div>
<div class="form-group">
  <%= f.label :price, "单价(元)" %>
  <%= f.number_field :price, placeholder: "必需", min: 0, step: 0.01, required: "required", class: "form-control" %>
</div>
<div class="form-group">
  <%= f.label :tax_rate, "税率(例如:4.5%的减税就填0.045)" %>
  <%= f.number_field :tax_rate, placeholder: "没有就不填", step: 0.001, min: 0, max: 1, class: "form-control" %>
</div>
<div class="form-group">
  <%= f.label :deposit, "押金" %>
  <%= f.number_field :deposit, placeholder: "没有就不填", min: 0, step: 1, class: "form-control" %>
</div>
<div class="form-group">
  <%= f.label :freight, "运费(元)" %>
  <%= f.number_field :freight, placeholder: "没有就不填", min: 0, step: 1, class: "form-control" %>
</div>
<div class="form-group">
  <%= f.label :bill_time, "账单时间" %>
  <%= f.datetime_field :bill_time, value: default_time_now, class: "form-control" %>
</div>
<div class="form-group">
  <%= f.label :is_return, "是退货/退押金吗？" %>
  <a class="far fa-question-circle" data-toggle="tooltip" data-placement="right" title="退货的话要减少需要付给供货商的钱"> </a>
  <%= f.check_box :is_return %>
</div>

<% if type_2 == "edit" %>
  <div class="form-group">
    <%= f.label :user_id, "经手人" %>
    <%= f.select :user_id, options_for_select(User.select(:id, :name).map {|n| [n.name, n.id]}, object.user_id), class: "form-control  " %>
  </div>
<% elsif type_2 == "create" %>
  <div class="form-group d-none">
    <%= f.label :user_id, "经手人ID" %>
    <%= f.number_field(:user_id, readonly: true, value: current_user.id, class: "form-control") %>
  </div>
<% end %>
<div class="form-group">
  <%= f.label :description, "描述" %>
  <%= f.text_area :description, class: "form-control" %>
</div>
<div class="picture">
  <%= label_tag "上传相关图片" %>
  <%= f.file_field :picture %>
</div>


<script>
    $(document).ready(function () {
        $('[data-toggle="tooltip"]').tooltip();
        // 采购单页面搜索供应商名称自动填充
        $("#purchase_orders_purchase_supplier").autocomplete(
            {source: $('#purchase_orders_purchase_supplier').data('autocomplete-source')},
            {
                mustContain: true
            }
        )
        // 采购单页面搜索原料名称自动填充
        $("#purchase_orders_name").autocomplete(
            {source: $('#purchase_orders_name').data('autocomplete-source')},
            {
                mustContain: true
            }
        )
        // 采购单页面搜索原料规格型号自动填充
        $("#purchase_orders_specification").autocomplete(
            {source: $('#purchase_orders_specification').data('autocomplete-source')},
            {
                mustContain: true,
            }
        )
    })
</script>